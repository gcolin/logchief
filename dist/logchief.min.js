(function(){function a(a){this.loggerName=a||"",this.path=a?a.split("."):[]}var b,c=this,d=function(a,b,c){void 0===c?delete a[b]:a[b]=c;var d=0;for(var e in a)d++;return 2==d},e={noop:function(){},createLogFun:function(a,b,c){var d=c._console[a],e=c._formatter;return d?function(a){Array.prototype.unshift.call(arguments,b);var f=e.apply(e,arguments);f&&"string"!=typeof f&&f.length?d.apply(c._console,f):d(f)}:this.noop},parameters:["level","console","formatter"],logNames:["debug","info","warn","error"],loggerCache:{},loggerConfig:[],eachConfig:function(a,b,c,d){for(var e=a.length-1;e>=0;e--){var f=d?b:a[e].path,g=d?a[e].path:b;if(g.length>=f.length){for(var h=0;h<f.length&&f[h]==g[h];h++);h==f.length&&c(a[e],f.length)&&a.splice(e,1)}}},formatName:function(a,b){return a&&b&&(a=b+"."+a),!a&&b&&(a=b),a||(a=""),a},setConfig:function(a,b,c){for(var e,f=0;f<this.loggerConfig.length;f++)if(this.loggerConfig[f].loggerName===a){e=this.loggerConfig[f],d(this.loggerConfig[f],b,c)&&this.loggerConfig.splice(f,1);break}if(!e){var g={loggerName:a,path:a.split(".")};e=g,d(g,b,c)||this.loggerConfig.push(g)}this.initAll(e.path)},resetLevels:function(){this.logNamesCapitalized=[];for(var b=0;b<this.logNames.length;b++)this.logNamesCapitalized.push(this.logNames[b].substring(0,1).toUpperCase()+this.logNames[b].substring(1));a.prototype.levels={};for(var c=0;c<this.logNames.length;c++)a.prototype.levels[this.logNames[c]]=c,a.prototype["level"+this.logNamesCapitalized[c]]=function(a){return function(b){this.builder.setConfig(this.builder.formatName(b,this.loggerName),"level",a)}}(c);var d=a.prototype.levels.off=this.logNames.length;a.prototype.levelOff=function(a){this.builder.setConfig(this.builder.formatName(a,this.loggerName),"level",d)},this.initAll()},resetParameters:function(){for(var b=0;b<this.parameters.length;b++){var c=this.parameters[b];a.prototype[c]=function(a){return function(b,c){if(void 0===b)return this["_"+a];this.builder.setConfig(this.builder.formatName(c,this.loggerName),a,b)}}(c),a.prototype["unset"+c.substring(0,1).toUpperCase()+c.substring(1)]=function(a){return function(b){if(!(b=this.builder.formatName(b,this.loggerName)))throw new Error("cannot unset root "+a+" but you can override it");this.builder.setConfig(b,a)}}(c)}this.initAll()},postInit:[function(a){for(var b=0;b<this.logNames.length;b++)b<a._level?a[this.logNames[b]]=this.noop:a[this.logNames[b]]=this.createLogFun(this.logNames[b],a.loggerName,a),a["is"+this.logNamesCapitalized[b]]=a[this.logNames[b]]!==this.noop}],init:function(a){for(var b=[],c=0;c<this.parameters.length;c++)b.push(-1);var d=this;this.eachConfig(this.loggerConfig,a.path,function(c,e){for(var f=0;f<d.parameters.length;f++)b[f]<e&&void 0!==c[d.parameters[f]]&&(a["_"+d.parameters[f]]=c[d.parameters[f]],b[f]=e)});for(var e=0;e<this.postInit.length;e++)this.postInit[e].call(this,a)},initAll:function(a){if(a&&a.length){var c=[];for(var d in this.loggerCache)c.push(this.loggerCache[d]);var f=this;e.eachConfig(c,a,function(a){f.init(a)},!0)}else{b&&this.init(b);for(var g in this.loggerCache)this.init(this.loggerCache[g])}}};a.prototype.builder=e,e.resetLevels(),e.resetParameters(),a.prototype.get=function(b){if(!b)return this;var c=this.builder;b=c.formatName(b,this.loggerName);var d=c.loggerCache[b];return d||(c.loggerCache[b]=d=new a(b),c.init(d)),d},a.prototype.reset=function(){this.builder.eachConfig(this.builder.loggerConfig,this.path,function(){return!0},!0),this.loggerName||this.builder.loggerConfig.push({formatter:function(a,b){return b instanceof Error&&(b.stack?b=b.message&&-1===b.stack.indexOf(b.message)?"Error: "+b.message+"\n"+b.stack:b.stack:b.sourceURL&&(b=b.message+"\n"+b.sourceURL+":"+b.line)),a&&(b=a+" - "+b),[b]},console:c.console||{},level:1,loggerName:"",path:[]}),this.builder.initAll(this.path)},b=new a,b.reset(),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=logger),exports.logchief=b):c.logger=b,"function"==typeof define&&define.amd&&define("logchief",[],function(){return b})}).call(this);